<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="有趣的东西,圆周率," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="为什么算这个很早以前就十分naive的写cogs上的“神秘的常数π”，当时只是想锻炼一下码力，学习一些有趣的知识，但是失败了，只能算到10000位左右而且效率非常低下
很多人说这个东西和OI没什么关系，其实不然，写了才知道其中的乐趣，而且这里面涉及到很多数学的方法，可以很大程度上锻炼代码能力和调试能力，还是十分值得去挑战一下的">
<meta property="og:type" content="article">
<meta property="og:title" content="有关圆周率的计算">
<meta property="og:url" content="http://stdafx.ga/2016/07/20/有关圆周率的计算/index.html">
<meta property="og:site_name" content="stdafx's Blog">
<meta property="og:description" content="为什么算这个很早以前就十分naive的写cogs上的“神秘的常数π”，当时只是想锻炼一下码力，学习一些有趣的知识，但是失败了，只能算到10000位左右而且效率非常低下
很多人说这个东西和OI没什么关系，其实不然，写了才知道其中的乐趣，而且这里面涉及到很多数学的方法，可以很大程度上锻炼代码能力和调试能力，还是十分值得去挑战一下的">
<meta property="og:image" content="http://cojs.tk/upload/image/20160306/20160306164434_81229.png">
<meta property="og:image" content="http://cojs.tk/upload/image/20160306/20160306165235_21050.png">
<meta property="og:image" content="http://cojs.tk/upload/image/20160306/20160306164552_30221.png">
<meta property="og:updated_time" content="2016-07-20T09:03:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="有关圆周率的计算">
<meta name="twitter:description" content="为什么算这个很早以前就十分naive的写cogs上的“神秘的常数π”，当时只是想锻炼一下码力，学习一些有趣的知识，但是失败了，只能算到10000位左右而且效率非常低下
很多人说这个东西和OI没什么关系，其实不然，写了才知道其中的乐趣，而且这里面涉及到很多数学的方法，可以很大程度上锻炼代码能力和调试能力，还是十分值得去挑战一下的">
<meta name="twitter:image" content="http://cojs.tk/upload/image/20160306/20160306164434_81229.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'stdafx'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://stdafx.ga/2016/07/20/有关圆周率的计算/"/>





  <title> 有关圆周率的计算 | stdafx's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9c616d8a49183f1ab5abf3385d00a440";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">stdafx's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Welcome</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://stdafx.ga/2016/07/20/有关圆周率的计算/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="stdafx">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="stdafx's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="stdafx's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                有关圆周率的计算
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-20T16:53:55+08:00">
                2016-07-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/亦可赛艇/" itemprop="url" rel="index">
                    <span itemprop="name">亦可赛艇</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/07/20/有关圆周率的计算/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/20/有关圆周率的计算/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="为什么算这个"><a href="#为什么算这个" class="headerlink" title="为什么算这个"></a>为什么算这个</h2><p>很早以前就十分naive的写cogs上的“神秘的常数π”，当时只是想锻炼一下码力，学习一些有趣的知识，但是失败了，只能算到10000位左右而且效率非常低下</p>
<p>很多人说这个东西和OI没什么关系，其实不然，写了才知道其中的乐趣，而且这里面涉及到很多数学的方法，可以很大程度上锻炼代码能力和调试能力，还是十分值得去挑战一下的</p>
<a id="more"></a>
<h2 id="预备技能"><a href="#预备技能" class="headerlink" title="预备技能"></a>预备技能</h2><ul>
<li>FFT<ul>
<li>大家应该都会,这是用来优化乘法的…</li>
<li>如果不会就去看算法导论</li>
</ul>
</li>
<li>牛顿迭代<ul>
<li><a href="https://en.wikipedia.org/wiki/Newton%27s_method" target="_blank" rel="external">Wikipedia Newton Method</a></li>
<li>这个是求开根和除法之类的</li>
<li>这个一定要搞明白</li>
</ul>
</li>
<li>耐心<ul>
<li>我大概重写了2遍，做了4次很大的修改，加上调试什么的代码量差不多40k+</li>
</ul>
</li>
</ul>
<h2 id="我用的两个公式"><a href="#我用的两个公式" class="headerlink" title="我用的两个公式"></a>我用的两个公式</h2><ul>
<li>Chudnovsky<ul>
<li>我最后的版本就是写的这个方法</li>
<li>好像算PI的世界纪录也是用的这个方法</li>
<li>很多涉及的数学方法我没有仔细研究，只是大概了解了一下，最后用了这个式子</li>
<li><a href="https://en.wikipedia.org/wiki/Chudnovsky_algorithm" target="_blank" rel="external">Wikipedia Chudnovsky Algorithm</a></li>
</ul>
</li>
<li>GLA<ul>
<li>这个网上好像查不到</li>
<li>是我在COGS上看到的，效果很好，我写的第二版就是GLA</li>
<li>初始化 </li>
<li><img src="http://cojs.tk/upload/image/20160306/20160306164434_81229.png" alt="GLA"></li>
<li>迭代</li>
<li><img src="http://cojs.tk/upload/image/20160306/20160306165235_21050.png" alt="GLA"></li>
<li>最后</li>
<li><img src="http://cojs.tk/upload/image/20160306/20160306164552_30221.png" alt="GLA"></li>
</ul>
</li>
</ul>
<h2 id="怎么写"><a href="#怎么写" class="headerlink" title="怎么写"></a>怎么写</h2><ul>
<li><p>FFT</p>
<ul>
<li>最先优化的就是FFT,不仅仅是速度还有精度上</li>
<li>具体优化速度就是预处理Omega数组，不过这样内存会彪到很大的数量级，大概500mb<ul>
<li>还有就是用指针来写维护数组的一些东西</li>
<li>我在网上还看到把FFT展开成代码来优化的</li>
<li>还有就是写Split-radix FFT，然而我并不会</li>
<li>还有就是把浮点数运算写成汇编，把数组指针变化写成汇编</li>
<li>还有就是我在网上看到有人写SSE3指令优化，写OpenMP的一些指令来优化，可以快10倍甚至20倍</li>
</ul>
</li>
<li>关于精度呢就是不要迭代来求Omega就好了，在OI中都是迭代求Omega，写这个的时候要一直调三角函数来求，普通的写法1e-9的要求，n到65536就爆炸了，改成这样可以撑到大概2^26左右</li>
<li>所有的优化都加上就已经十分快了，但是我不会写分裂基FFT，也不会汇编，也不会SSE3，也不会OpenMP，所以我写的快不了多少…. 算400w的普通FFT要50s+，我的大概35s+</li>
<li>我看到过一个加上OpenMP的代码，算400w好像就&lt;5s</li>
</ul>
</li>
<li><p>高精度浮点数</p>
<ul>
<li>这个东西十分恶心，小数点什么的，精度什么的，边界十分难控制</li>
<li>我最开始写的版本十分naive直接用一个数组来模拟，前2000位是整数部分，后若干位是小数部分，虽然只是输出的时候方便了点，但是这个做法实在是太simple了<ul>
<li>第一点就是 Chudnovsky 迭代的那个N会很大，整数部分不可能全存下来</li>
<li>第二点就是精度无法控制</li>
<li>而且我当时好像一个数组位置压了4位，精度经常炸，而且不会写动态的内存，然后代码就十分难调</li>
</ul>
</li>
<li>之后我改成了GLA，这样写最多算到大概1w位</li>
<li>第二个版本我改成了动态的内存控制，一个点压9位，做乘法的时候把一位展开成3位，防止爆精度，而且我记录了小数点后的位数来控制小数位置的精度，这个存储的方法是我参照一个国外大神写的，用的内存很小<ul>
<li>但是我发现Chudnovsky算出来的数整数部分十分大，没法控制前面的精度</li>
<li>还有就是推荐可以用std::unique_ptr,内存管理就很简单了，可是我没有写….</li>
</ul>
</li>
<li>之后有重新翻了一遍版，把一个数存储成<code>(a[0]*1e9+a[1]*1e18+.....)*1e(exp)</code>,exp是人为控制的,这样的话就算是很大的整数可以抹掉一些非小数的部分来控制很小的精度来加速运算</li>
</ul>
</li>
<li><p>牛顿迭代</p>
<ul>
<li>这个东西是迭代，所以启发我们在迭代的时候逐步扩大精度来加快运算</li>
<li>所以比如说算sqrt(2)，可以写一个递归，到精度要求很低时，把结果改成直接调sqrt(2)</li>
<li>最开始写的时候不知道怎么控制精度，直接把精度调成最大，这样做迭代50次+才可以达到预期的效果</li>
</ul>
</li>
</ul>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="第二版"><a href="#第二版" class="headerlink" title="第二版"></a>第二版</h3><ul>
<li>大概可以算到2000w位，需要很长时间</li>
<li>里面有很多调试的废话，无视就好了</li>
<li>代码好像太长没有高亮….</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div><div class="line">1150</div><div class="line">1151</div><div class="line">1152</div><div class="line">1153</div><div class="line">1154</div><div class="line">1155</div><div class="line">1156</div><div class="line">1157</div><div class="line">1158</div><div class="line">1159</div><div class="line">1160</div><div class="line">1161</div><div class="line">1162</div><div class="line">1163</div><div class="line">1164</div><div class="line">1165</div><div class="line">1166</div><div class="line">1167</div><div class="line">1168</div><div class="line">1169</div><div class="line">1170</div><div class="line">1171</div><div class="line">1172</div><div class="line">1173</div><div class="line">1174</div><div class="line">1175</div><div class="line">1176</div><div class="line">1177</div><div class="line">1178</div><div class="line">1179</div><div class="line">1180</div><div class="line">1181</div><div class="line">1182</div><div class="line">1183</div><div class="line">1184</div><div class="line">1185</div><div class="line">1186</div><div class="line">1187</div><div class="line">1188</div><div class="line">1189</div><div class="line">1190</div><div class="line">1191</div><div class="line">1192</div><div class="line">1193</div><div class="line">1194</div><div class="line">1195</div><div class="line">1196</div><div class="line">1197</div><div class="line">1198</div><div class="line">1199</div><div class="line">1200</div><div class="line">1201</div><div class="line">1202</div><div class="line">1203</div><div class="line">1204</div><div class="line">1205</div><div class="line">1206</div><div class="line">1207</div><div class="line">1208</div><div class="line">1209</div><div class="line">1210</div><div class="line">1211</div><div class="line">1212</div><div class="line">1213</div><div class="line">1214</div><div class="line">1215</div><div class="line">1216</div><div class="line">1217</div><div class="line">1218</div><div class="line">1219</div><div class="line">1220</div><div class="line">1221</div><div class="line">1222</div><div class="line">1223</div><div class="line">1224</div><div class="line">1225</div><div class="line">1226</div><div class="line">1227</div><div class="line">1228</div><div class="line">1229</div><div class="line">1230</div><div class="line">1231</div><div class="line">1232</div><div class="line">1233</div><div class="line">1234</div><div class="line">1235</div><div class="line">1236</div><div class="line">1237</div><div class="line">1238</div><div class="line">1239</div><div class="line">1240</div><div class="line">1241</div><div class="line">1242</div><div class="line">1243</div><div class="line">1244</div><div class="line">1245</div><div class="line">1246</div><div class="line">1247</div><div class="line">1248</div><div class="line">1249</div><div class="line">1250</div><div class="line">1251</div><div class="line">1252</div><div class="line">1253</div><div class="line">1254</div><div class="line">1255</div><div class="line">1256</div><div class="line">1257</div><div class="line">1258</div><div class="line">1259</div><div class="line">1260</div><div class="line">1261</div><div class="line">1262</div><div class="line">1263</div><div class="line">1264</div><div class="line">1265</div><div class="line">1266</div><div class="line">1267</div><div class="line">1268</div><div class="line">1269</div><div class="line">1270</div><div class="line">1271</div><div class="line">1272</div><div class="line">1273</div><div class="line">1274</div><div class="line">1275</div><div class="line">1276</div><div class="line">1277</div><div class="line">1278</div><div class="line">1279</div><div class="line">1280</div><div class="line">1281</div><div class="line">1282</div><div class="line">1283</div><div class="line">1284</div><div class="line">1285</div><div class="line">1286</div><div class="line">1287</div><div class="line">1288</div><div class="line">1289</div><div class="line">1290</div><div class="line">1291</div><div class="line">1292</div><div class="line">1293</div><div class="line">1294</div><div class="line">1295</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/*</div><div class="line">	PI Calculator</div><div class="line">	Author: stdafx</div><div class="line">*/</div><div class="line"> </div><div class="line"># define fastcall __attribute__((optimize("-O3")))</div><div class="line"># define IL __inline__ __attribute__((always_inline)) </div><div class="line"> </div><div class="line"># define rep(_i,_s,_t) for(register int (_i)=(_s);(_i)&lt;=(_t);++(_i))</div><div class="line"># define dwn(_i,_s,_t) for(register int (_i)=(_s);(_i)&gt;=(_t);--(_i))</div><div class="line"> </div><div class="line"># include &lt;time.h&gt;</div><div class="line"># include &lt;math.h&gt;</div><div class="line"># include &lt;string&gt;</div><div class="line"># include &lt;stdio.h&gt;</div><div class="line"># include &lt;stdlib.h&gt;</div><div class="line"># include &lt;assert.h&gt;</div><div class="line"># include &lt;iostream&gt;</div><div class="line"># include &lt;string.h&gt;</div><div class="line"># include &lt;algorithm&gt;</div><div class="line"> </div><div class="line"># define int_log 31ll</div><div class="line"># define max_used_len 2097152ll</div><div class="line"> </div><div class="line">fastcall IL int intSign(long long x) &#123; return x&lt;0; &#125;</div><div class="line"> </div><div class="line">fastcall IL double global_time() &#123; return (double)clock() / CLOCKS_PER_SEC;	 &#125;</div><div class="line"> </div><div class="line">fastcall IL int rand32() &#123;</div><div class="line">    return (int)(</div><div class="line">            (rand() &amp; 0xf) &lt;&lt;  0 |</div><div class="line">            (rand() &amp; 0xf) &lt;&lt;  8 |</div><div class="line">            (rand() &amp; 0xf) &lt;&lt; 16 |</div><div class="line">            (rand() &amp; 0xf) &lt;&lt; 24</div><div class="line">        ) % 1000000000;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">fastcall IL std::string number_to_string(long long number) &#123;</div><div class="line">	</div><div class="line">	char c_str[30]; sprintf(c_str,"%lld",number);</div><div class="line">	std::string str = c_str;</div><div class="line">	</div><div class="line">	return str;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">typedef double ld;</div><div class="line"> </div><div class="line">int bin[int_log+1];</div><div class="line"> </div><div class="line">struct pdd &#123; int a,b,c; &#125;;</div><div class="line"> </div><div class="line">struct cpx &#123;</div><div class="line">	ld r, i; </div><div class="line">	fastcall IL cpx conj() &#123;  return (cpx)&#123;r,-i&#125;; &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">cpx *tf1,*tf2;</div><div class="line"> </div><div class="line">fastcall cpx operator + (const cpx &amp;a, const cpx &amp;b) &#123; return (cpx) &#123; a.r + b.r, a.i + b.i&#125;; &#125;</div><div class="line">fastcall cpx operator - (const cpx &amp;a, const cpx &amp;b) &#123; return (cpx) &#123; a.r - b.r, a.i - b.i&#125;; &#125;</div><div class="line">fastcall cpx operator * (const cpx &amp;a, const cpx &amp;b) &#123; return (cpx) &#123; a.r*b.r - a.i*b.i, a.r*b.i + a.i*b.r&#125;; &#125;</div><div class="line"> </div><div class="line">fastcall cpx rand_cpx() &#123; return (cpx)&#123; (double)(rand32()%1000), (double)(rand32()%1000) &#125;; &#125;</div><div class="line"> </div><div class="line">const ld eps=1e-9;</div><div class="line"> </div><div class="line">void write_in_file(const char *name ,const std::string &amp;str)&#123;</div><div class="line"> </div><div class="line">    FILE *file = fopen(name, "wb");</div><div class="line"> </div><div class="line">    fwrite(str.c_str(), 1, str.size(), file);</div><div class="line">    </div><div class="line">    fclose(file); return;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">namespace FFT &#123;</div><div class="line"> </div><div class="line">	# define max_fft_log 23ll</div><div class="line">	# define max_fft_len 8388608ll</div><div class="line"> </div><div class="line">	# define M_PI 3.14159265358979323846</div><div class="line"> </div><div class="line"> </div><div class="line">	int *rev[max_fft_log+1];</div><div class="line"> </div><div class="line">	cpx *prw[max_fft_log+1],*prwi[max_fft_log+1];</div><div class="line">	</div><div class="line"> </div><div class="line">	bool prepared_Rev[max_fft_log+1],prepared_W[max_fft_log+1];</div><div class="line"> </div><div class="line"> </div><div class="line">	void prepareRev(int lg) &#123;</div><div class="line"> </div><div class="line">		register int *tmp,len=bin[lg]; </div><div class="line"> </div><div class="line">		rev[lg] = new int [len]; tmp=rev[lg]; tmp[0]=0;</div><div class="line"> </div><div class="line">		for(register int i=0;i&lt;len;i++) tmp[i]=tmp[i&gt;&gt;1]&gt;&gt;1|((i&amp;1)&lt;&lt;(lg-1));</div><div class="line"> </div><div class="line">		prepared_Rev[lg]=true; return;</div><div class="line"> </div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	void prepareWn(int lg,int p) &#123;</div><div class="line"> </div><div class="line">		register cpx *pw,*pwi;</div><div class="line">		</div><div class="line">		prw  [lg] = new cpx [p]; pw  = prw  [lg];</div><div class="line">		prwi [lg] = new cpx [p]; pwi = prwi [lg];</div><div class="line"> </div><div class="line">		register ld omega = M_PI/p,s,c;</div><div class="line"> </div><div class="line">		for(register int i=0;i&lt;p;i++) &#123;</div><div class="line">			</div><div class="line">			pw  [i] = (cpx)&#123; c = cos(omega*i) ,   s = sin(omega*i) &#125;;</div><div class="line">			pwi [i] = (cpx)&#123; c				  , - s 			   &#125;;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		prepared_W[lg] = true;</div><div class="line"> </div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	void fft_normal(cpx *a,int n, int flag) &#123; // to compare</div><div class="line">		for (int i = 0, j = 0; i &lt; n; i++) &#123;</div><div class="line">			if (i &gt; j) std::swap(a[i], a[j]);</div><div class="line">			for (int t = n &gt;&gt; 1; (j ^= t) &lt; t; t &gt;&gt;= 1);</div><div class="line">		&#125;</div><div class="line">		int m = 2; cpx wn, w, t, u;</div><div class="line">		for (; m &lt;= n; m &lt;&lt;= 1) &#123;</div><div class="line">			wn = (cpx) &#123;cos(2.0 * M_PI / m), flag * sin(2.0 * M_PI / m)&#125;, w = (cpx) &#123;1, 0&#125;;</div><div class="line">			for (int i = 0; i &lt; n; i += m, w = (cpx) &#123;1, 0&#125;) for (int k = 0, p = m &gt;&gt; 1; k &lt; p; ++k, w = w * wn)</div><div class="line">				t = w * a[i + k + p], u = a[i + k], a[i + k] = u + t, a[i + k + p] = u - t;</div><div class="line">		&#125;</div><div class="line">		if (flag == -1) for (int i = 0; i &lt; n; i++) a[i].r /= n;</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	void fft(register cpx *f,register int lg) &#123;</div><div class="line"> </div><div class="line">		register int n= 1 &lt;&lt; lg ;</div><div class="line">		</div><div class="line">		if(!prepared_Rev[lg])  prepareRev(lg);</div><div class="line">		</div><div class="line">		register int *tRev=rev[lg],i,m,log_m,k,p;</div><div class="line">		</div><div class="line">		register cpx *w,*f1,*f2,t;</div><div class="line"> </div><div class="line">		for(i=0;i&lt;n;++i,++tRev) if(i&lt;*tRev) </div><div class="line">			std::swap(f[i],f[*tRev]);</div><div class="line"> </div><div class="line">		for(m=2,log_m=1;m&lt;=n;m&lt;&lt;=1,++log_m) &#123;</div><div class="line"> </div><div class="line">			p=m&gt;&gt;1;</div><div class="line"> </div><div class="line">			if(!prepared_W[log_m]) prepareWn(log_m,p);</div><div class="line"> </div><div class="line">			for(i=0;i&lt;n;i+=m) &#123;</div><div class="line"> </div><div class="line">				w=prw[log_m];</div><div class="line"> </div><div class="line">				f1=f+i,f2=f+i+p;</div><div class="line"> </div><div class="line">				for(k=0;k&lt;p;++k) &#123;</div><div class="line"> </div><div class="line">					t=(*w)*(*f2);</div><div class="line"> </div><div class="line">					(*f2)=(*f1)-t;</div><div class="line"> </div><div class="line">					f1-&gt;r+=t.r;</div><div class="line">					f1-&gt;i+=t.i;</div><div class="line"> </div><div class="line">					++f1,++f2,++w;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	void ifft(register cpx *f,register int lg) &#123;</div><div class="line"> </div><div class="line">		register int n= 1 &lt;&lt; lg ;</div><div class="line">		</div><div class="line">		register int *tRev=rev[lg],i,m,log_m,k,p;</div><div class="line">		</div><div class="line">		register cpx *w,*f1,*f2,t;</div><div class="line"> </div><div class="line">		for(i=0;i&lt;n;++i,++tRev) if(i&lt;*tRev) </div><div class="line">			std::swap(f[i],f[*tRev]);</div><div class="line"> </div><div class="line">		for(m=2,log_m=1;m&lt;=n;m&lt;&lt;=1,++log_m) &#123;</div><div class="line"> </div><div class="line">			p=m&gt;&gt;1;</div><div class="line"> </div><div class="line">			for(i=0;i&lt;n;i+=m) &#123;</div><div class="line"> </div><div class="line">				w=prwi[log_m];</div><div class="line"> </div><div class="line">				f1=f+i,f2=f+i+p;</div><div class="line"> </div><div class="line">				for(k=0;k&lt;p;++k) &#123;</div><div class="line"> </div><div class="line">					t=(*w)*(*f2);</div><div class="line"> </div><div class="line">					(*f2)=(*f1)-t;</div><div class="line"> </div><div class="line">					f1-&gt;r+=t.r;</div><div class="line">					f1-&gt;i+=t.i;</div><div class="line"> </div><div class="line">					++f1,++f2,++w;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		register ld img = 1.0 / n;</div><div class="line"> </div><div class="line">		for(i=0;i&lt;n;i++) f[i].r*=img;</div><div class="line"> </div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	void Test() &#123;</div><div class="line"> </div><div class="line">		double time_tot=0;</div><div class="line"> </div><div class="line">		register cpx *array = new cpx [max_fft_len];</div><div class="line"> </div><div class="line">		register ld *rp = new double [max_fft_len];</div><div class="line"> </div><div class="line">		for(int i=0;i&lt;=max_fft_log;i++) &#123;</div><div class="line"> </div><div class="line"> </div><div class="line">			int len= 1 &lt;&lt; i ;</div><div class="line"> </div><div class="line">			for(int j=0;j&lt;len;j++) array[j]=(cpx) &#123; rp[j] = (double)(rand32()%1000), 0 &#125;;</div><div class="line"> </div><div class="line">			double st=global_time();</div><div class="line"> </div><div class="line">			//fft_normal(array,len,+1);</div><div class="line">			//fft_normal(array,len,-1);</div><div class="line"> </div><div class="line">			fft(array,i);</div><div class="line">			ifft(array,i);</div><div class="line"> </div><div class="line">			printf("time used = %.3lf \n",global_time()-st);</div><div class="line">			</div><div class="line">			time_tot+=global_time()-st;</div><div class="line"> </div><div class="line">			for(int j=0;j&lt;len;j++) assert( fabs(rp[j]-array[j].r) &lt; eps);</div><div class="line"> </div><div class="line">			printf("accepted on len %d \n\n",len);</div><div class="line"> </div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		delete []array;</div><div class="line">		</div><div class="line">		printf("total time used = %.3lf \n",time_tot);</div><div class="line"> </div><div class="line">		return;</div><div class="line"> </div><div class="line">	&#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line"># define EXTRA_PR 2</div><div class="line"> </div><div class="line">struct __float256 &#123;</div><div class="line">	</div><div class="line">	int *array;  // digits , 9 digits in one position</div><div class="line">	int exp,L;   // exp , total digits  |  if number = 0 , L = 0</div><div class="line">	bool sign;   /* if sign = true  , number &gt;= 0</div><div class="line">					   sign = false   , number &lt;  0 */</div><div class="line">	</div><div class="line">	</div><div class="line">	inline __float256() &#123; // Initialization , 0</div><div class="line">		</div><div class="line">		array = NULL;</div><div class="line">		</div><div class="line">		exp=L=0; sign=true;</div><div class="line">		</div><div class="line">		return;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	fastcall IL void apply_memory(int len) &#123;</div><div class="line">		</div><div class="line">		assert(array==NULL);</div><div class="line">		</div><div class="line">		array = new int [len];</div><div class="line">		</div><div class="line">		memset(array,0,sizeof(int)*len);</div><div class="line">		</div><div class="line">		return;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	fastcall IL void destroy() &#123;</div><div class="line">		</div><div class="line">		if(array!=NULL) delete []array;</div><div class="line">		</div><div class="line">		array = NULL;</div><div class="line">		</div><div class="line">		exp=L=0; sign=true;</div><div class="line">		</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"> </div><div class="line">	fastcall IL void set32(int number) &#123; // 0 -&gt; 10^9 - 1</div><div class="line">		</div><div class="line">		destroy();</div><div class="line">		</div><div class="line">		if(!number) return;</div><div class="line">		</div><div class="line">		L = 1 , apply_memory(1);</div><div class="line">		</div><div class="line">		if(number&lt;0) sign=false,number=-number;</div><div class="line">		</div><div class="line">		else sign=true;</div><div class="line">		</div><div class="line">		array[0]=number;</div><div class="line">		</div><div class="line">		return;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	fastcall IL void negate() &#123;</div><div class="line">		</div><div class="line">		if(!L) return;</div><div class="line">		</div><div class="line">		sign^=1; return;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	fastcall IL int at(int mag) &#123; // word at (10 ^ 9) ^ mag</div><div class="line">		</div><div class="line">		if(mag&lt;exp) return 0;</div><div class="line">		</div><div class="line">		if(mag&gt;=L+exp) return 0;</div><div class="line">		</div><div class="line">		return array[ mag - exp ];</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	int to_string_trimmed(int digits , std::string &amp;str) &#123;</div><div class="line">		</div><div class="line">		// front digits , return exponent</div><div class="line">		</div><div class="line">		if(!L) &#123;</div><div class="line">			</div><div class="line">			str="0"; return 0;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	    int exponent = exp;</div><div class="line">	    int length = L , *ptr = array ;</div><div class="line">	    </div><div class="line">	    if(!digits) &#123;</div><div class="line">	    	// all</div><div class="line">	    	digits = length * 9;</div><div class="line">	    	</div><div class="line">		&#125; else &#123;</div><div class="line">			</div><div class="line">			int words = (digits + 17) / 9;</div><div class="line">	        </div><div class="line">			if (words &lt; length)&#123;</div><div class="line">	            int chop = length - words;</div><div class="line">				exponent += chop;</div><div class="line">	            length = words;</div><div class="line">	            ptr += chop;</div><div class="line">	        &#125;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		exponent *= 9;</div><div class="line">		</div><div class="line">		char buffer[10];  str.clear();  int c=length;</div><div class="line">		</div><div class="line">		while(c-- &gt; 0) &#123;</div><div class="line">			</div><div class="line">			register int word = ptr[c];</div><div class="line">			</div><div class="line">			for(register int i=8;~i;--i) &#123;</div><div class="line">				buffer[i]=word%10+'0';</div><div class="line">				word/=10;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			buffer[9]='\0';</div><div class="line">			</div><div class="line">			str+=buffer;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		int ledz=0;</div><div class="line">		while(str[ledz]=='0') ++ledz;</div><div class="line">		digits+=ledz;</div><div class="line">		</div><div class="line">		if(digits&lt;str.size()) &#123;</div><div class="line">			exponent+=str.size()-digits;</div><div class="line">			str.resize(digits);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		return exponent;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	std::string to_sci(int digits = 0) &#123;</div><div class="line">		</div><div class="line">		if(!L) return "0";</div><div class="line">		</div><div class="line">		std::string str;</div><div class="line">		</div><div class="line">		int exponent = to_string_trimmed(digits,str);</div><div class="line">		</div><div class="line">	//	std::cout&lt;&lt;str&lt;&lt;std::endl;</div><div class="line">		</div><div class="line">		int ledz=0;</div><div class="line">		while(str[ledz]=='0') ++ledz;</div><div class="line">		str=&amp;str[ledz];</div><div class="line">		</div><div class="line">		exponent+=str.size()-1;</div><div class="line">		str=str.substr(0,1)+"."+(&amp;str[1]);</div><div class="line">		</div><div class="line">		if(exponent!=0) &#123;</div><div class="line">			str+=" * 10 ^";</div><div class="line">			str+=number_to_string(exponent);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if(!sign) str="-"+str;</div><div class="line">		</div><div class="line">		return str;</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	std::string to_string(int digits) &#123;</div><div class="line">			</div><div class="line">		if(!L) return "0";</div><div class="line">	</div><div class="line">		int mag=exp+L;</div><div class="line">		</div><div class="line">		if(mag&gt;1||mag&lt;0) return to_sci(); // mag = 0 (-1) || mag = 1 ( 0 )</div><div class="line">		</div><div class="line">		std::string str;</div><div class="line">		int exponent = to_string_trimmed(digits,str);</div><div class="line">		</div><div class="line">		if(mag==0) &#123;</div><div class="line">			if(sign) return "0."+str;</div><div class="line">			else return "-0."+str;</div><div class="line">		&#125;</div><div class="line"> </div><div class="line"> 		std::string before = number_to_string(array[L-1]);</div><div class="line"> 		if(exponent&gt;=0) &#123;</div><div class="line"> 			</div><div class="line"> 			if(sign) return before;</div><div class="line"> 			else return "-"+before;</div><div class="line"> 			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		std::string after=str.substr(str.size()+exponent,-exponent);</div><div class="line">		</div><div class="line">		if(sign) return before+"."+after;</div><div class="line">		else return "-"+before+"."+after;</div><div class="line"> </div><div class="line"> </div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	void print()&#123;</div><div class="line">		</div><div class="line">		std::cout&lt;&lt;to_string(30)&lt;&lt;std::endl;</div><div class="line">		</div><div class="line">		return;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">fastcall IL pdd getDiv(int x) &#123;</div><div class="line">	</div><div class="line">	register int a,b,c;</div><div class="line">	</div><div class="line">	a=x%1000,x/=1000;</div><div class="line">	b=x%1000,x/=1000;</div><div class="line">	c=x%1000;</div><div class="line">	</div><div class="line">	return (pdd)&#123;a,b,c&#125;;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">fastcall IL int mergePdd(register int a,register int b,register int c) &#123;</div><div class="line">	return a+b*1000+c*1000000;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">int cmp_unsigned(__float256 &amp;x,__float256 &amp;y) &#123; // ignoring sign</div><div class="line">	// 1 = (x&lt;y) , 0 = (x=y) , -1 = (x&gt;y)</div><div class="line">	</div><div class="line">	register int I1=x.exp+x.L,I2=x.exp+x.L; // max_d</div><div class="line">	</div><div class="line">	if(I1!=I2) return I1&lt;I2?1:-1;</div><div class="line">	</div><div class="line">	register int mag=I1,minExp=std::min(x.exp,y.exp);</div><div class="line">	</div><div class="line">	for(register int i=mag;i&gt;=minExp;--i) &#123;</div><div class="line">		</div><div class="line">		I1=x.at(i), I2=y.at(i);</div><div class="line">		if(I1!=I2) return I1&lt;I2?1:-1;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return 0; </div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 mul(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	if(!x.L||!y.L) return z;</div><div class="line">	</div><div class="line">	if(!precision) precision=x.L+y.L;</div><div class="line">	else precision+=EXTRA_PR;</div><div class="line">	</div><div class="line">	register int Aexp=x.exp,Bexp=y.exp,AL=x.L,BL=y.L;</div><div class="line">	register int *pA=x.array,*pB=y.array;</div><div class="line">	</div><div class="line">	if(AL&gt;precision) &#123;</div><div class="line">		</div><div class="line">		int chop=AL-precision;</div><div class="line">		AL=precision;</div><div class="line">		Aexp+=chop;</div><div class="line">		pA+=chop;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	if(BL&gt;precision) &#123;</div><div class="line">		int chop=BL-precision;</div><div class="line">		BL=precision;</div><div class="line">		Bexp+=chop;</div><div class="line">		pB+=chop;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	z.sign=(x.sign==y.sign);</div><div class="line">	z.exp=Aexp+Bexp;</div><div class="line">	z.L=AL+BL;</div><div class="line">	z.apply_memory(z.L);</div><div class="line">	</div><div class="line">	register pdd dx,dy;</div><div class="line"> </div><div class="line">	int fft_len=1,lg=0,tot=0;</div><div class="line">	</div><div class="line">	for(;fft_len&lt;z.L*3;fft_len&lt;&lt;=1,++lg);</div><div class="line">	</div><div class="line">	tf1=new cpx [fft_len];</div><div class="line">	</div><div class="line">	for(register int i=0;i&lt;z.L;i++) &#123;</div><div class="line">		</div><div class="line">		dx=getDiv(i&lt;AL?pA[i]:0); dy=getDiv(i&lt;BL?pB[i]:0);</div><div class="line">		</div><div class="line">		tf1[tot++]=(cpx)&#123;(ld)dx.a,(ld)dy.a&#125;;</div><div class="line">		tf1[tot++]=(cpx)&#123;(ld)dx.b,(ld)dy.b&#125;;</div><div class="line">		tf1[tot++]=(cpx)&#123;(ld)dx.c,(ld)dy.c&#125;;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	while(tot!=fft_len) tf1[tot++]=(cpx)&#123;0,0&#125;;</div><div class="line">	</div><div class="line">	FFT::fft(tf1,lg);</div><div class="line">	</div><div class="line">	tf2=new cpx [fft_len];</div><div class="line"> </div><div class="line">	for(register int i=0,j;i&lt;fft_len;i++) &#123;</div><div class="line">		</div><div class="line">		j=(fft_len-1)&amp;(fft_len-i);</div><div class="line">		tf2[i]=(tf1[i]*tf1[i]-(tf1[j]*tf1[j]).conj())*(cpx)&#123;0,-0.25&#125;;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	delete []tf1;</div><div class="line">	</div><div class="line">	FFT::ifft(tf2,lg);</div><div class="line">	</div><div class="line">	register int len;</div><div class="line">	</div><div class="line">	int *temporary = new int[ len = z.L*3 ];</div><div class="line">		</div><div class="line">	register long long inc=0;</div><div class="line">	</div><div class="line">	for(int i=0;i&lt;len;i++) &#123;</div><div class="line">		</div><div class="line">		temporary[i]=((long long)(tf2[i].r+0.5)+inc)%1000ll;</div><div class="line">		inc=((long long)(tf2[i].r+0.5)+inc)/1000ll;</div><div class="line">		</div><div class="line">		//printf("? %d \n",temporary[i]);</div><div class="line">		</div><div class="line">		// assert(temporary[i]&gt;=0);</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	delete []tf2;</div><div class="line">	</div><div class="line">	while((!temporary[len-1])&amp;&amp;(!temporary[len-2])&amp;&amp;(!temporary[len-3])) len-=3,z.L--;</div><div class="line">	</div><div class="line">	for(register int i=0;i&lt;z.L;i++)</div><div class="line">	</div><div class="line">		z.array[i] = mergePdd(temporary[i*3],temporary[i*3+1],temporary[i*3+2]);</div><div class="line">	</div><div class="line">	delete []temporary;</div><div class="line">	</div><div class="line">//	printf("%d \n",z.L);</div><div class="line">	</div><div class="line">//	printf("%d %d\n",z.sign,z.exp);</div><div class="line">	</div><div class="line">//	printf("%d %d\n",z.array[0],z.array[1]);</div><div class="line">	</div><div class="line">	return z;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void mul_to(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z=mul(x,y,precision);</div><div class="line">	</div><div class="line">	x.destroy(); x=z;</div><div class="line">	</div><div class="line">	return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 mul(__float256 &amp;x,unsigned int y) &#123;</div><div class="line"> </div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	if(!y||!x.L) return z;</div><div class="line">	</div><div class="line">	register long long inc=0;</div><div class="line">	</div><div class="line">	z.L=x.L; z.sign=x.sign;</div><div class="line">	</div><div class="line">	z.apply_memory(z.L+1);</div><div class="line">	</div><div class="line">	z.exp=x.exp;</div><div class="line">	</div><div class="line">	for(int i=0;i&lt;z.L;i++) &#123;</div><div class="line">		</div><div class="line">		z.array[i]=(inc+1ll*x.array[i]*y)%1000000000ll;</div><div class="line">		inc=(inc+1ll*x.array[i]*y)/1000000000ll;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	if(inc!=0) z.array[z.L++]=(int)(inc);</div><div class="line">	</div><div class="line">	return z;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void mul_to(__float256 &amp;x,long long y) &#123;</div><div class="line">	</div><div class="line">	__float256 z=mul(x,y);</div><div class="line">	</div><div class="line">	x.destroy(); x=z; return;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 add_unsigned(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	</div><div class="line">	int magA=x.exp+x.L,magB=y.exp+y.L;</div><div class="line">	int top = std::max(magA,magB);</div><div class="line">	int bot = std::min(x.exp,y.exp);</div><div class="line">	</div><div class="line">//	printf("?? %d %d \n",bot,top);</div><div class="line">	</div><div class="line">	int TL=top-bot;</div><div class="line">	</div><div class="line">	if(!precision) precision=TL;</div><div class="line">	else precision+=EXTRA_PR;</div><div class="line">	</div><div class="line">	if(TL&gt;precision) bot=top-precision,TL=precision;</div><div class="line">	</div><div class="line">	z.sign=true;</div><div class="line">	z.exp=bot;</div><div class="line">	z.L=TL;</div><div class="line">	z.apply_memory(z.L+1);</div><div class="line">	</div><div class="line">	register long long inc=0;</div><div class="line"> </div><div class="line">	register int I1,I2;</div><div class="line">	</div><div class="line">	for(register int i=0;bot&lt;top;++bot,++i) &#123;</div><div class="line">		</div><div class="line">		I1=x.at(bot),I2=y.at(bot);</div><div class="line">		</div><div class="line">	//	printf("%d %d %lld\n",I1,I2,inc);</div><div class="line">		</div><div class="line">		z.array[i]=(I1+I2+inc)%1000000000;</div><div class="line">		inc=(I1+I2+inc)/1000000000;</div><div class="line">	</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	if(inc) z.array[z.L++]=inc;</div><div class="line">	</div><div class="line">	return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 sub_unsigned(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	</div><div class="line">	int magA=x.exp+x.L,magB=y.exp+y.L;</div><div class="line">	int top = std::max(magA,magB);</div><div class="line">	int bot = std::min(x.exp,y.exp);</div><div class="line">	</div><div class="line">	int TL=top-bot;</div><div class="line">	</div><div class="line">	if(!precision) precision=TL;</div><div class="line">	else precision+=EXTRA_PR;</div><div class="line">	</div><div class="line">	if(TL&gt;precision) bot=top-precision,TL=precision;</div><div class="line">	</div><div class="line">	z.sign=true;</div><div class="line">	z.exp=bot;</div><div class="line">	z.L=TL;</div><div class="line">	z.apply_memory(z.L+1);</div><div class="line">	</div><div class="line">	register long long inc=0;</div><div class="line"> </div><div class="line">	register int I1,I2;</div><div class="line">	</div><div class="line">//	printf("%d - &gt; %d \n",bot,top);</div><div class="line">	</div><div class="line">	for(register int i=0;bot&lt;top;++bot,++i) &#123;</div><div class="line">		</div><div class="line">		I1=x.at(bot),I2=y.at(bot);</div><div class="line">		</div><div class="line">		//printf("i  = %d I1= %d I2 = %d inc = %lld \n",i,I1,I2,inc);</div><div class="line">		</div><div class="line">		z.array[i]=I1-I2+inc;</div><div class="line">		</div><div class="line">		inc=0;</div><div class="line">		</div><div class="line">		while(z.array[i]&lt;0) z.array[i]+=1000000000,--inc;</div><div class="line">		</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	while(z.L&gt;0&amp;&amp;z.array[z.L-1]==0) z.L--;</div><div class="line">	</div><div class="line">	if(!z.L) &#123;</div><div class="line">		z.destroy();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 add(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	if(x.sign==y.sign) &#123;</div><div class="line">		</div><div class="line">	//	x.print();</div><div class="line">	//	y.print();</div><div class="line">		</div><div class="line">		z=add_unsigned(x,y,precision);</div><div class="line">	</div><div class="line">		z.sign=x.sign;</div><div class="line">		</div><div class="line">		</div><div class="line">	&#125; else &#123;</div><div class="line">		</div><div class="line">		if(cmp_unsigned(x,y)&lt;=0) &#123; // |x| &gt; =|y|</div><div class="line">			</div><div class="line">			z=sub_unsigned(x,y,precision);</div><div class="line">			z.sign=x.sign;</div><div class="line">			</div><div class="line">		&#125; else &#123;</div><div class="line">			</div><div class="line">			z=sub_unsigned(y,x,precision); // |x| &lt; |y|</div><div class="line">			z.sign=y.sign;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void add_to(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z; z=add(x,y,precision);</div><div class="line">	</div><div class="line">	x.destroy(); x=z; return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 sub(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z;</div><div class="line">	</div><div class="line">	if(x.sign!=y.sign) &#123;</div><div class="line">		</div><div class="line">	//	printf("?[]\n");</div><div class="line">		</div><div class="line">	//	x.print();</div><div class="line">		</div><div class="line">	//	y.print();</div><div class="line">		</div><div class="line">		z=add_unsigned(x,y,precision);</div><div class="line">		</div><div class="line">		z.sign=x.sign;</div><div class="line">		</div><div class="line">	&#125; else &#123;</div><div class="line">		</div><div class="line">	//	printf("[");</div><div class="line">		</div><div class="line">	//	x.print();</div><div class="line">		</div><div class="line">	//	y.print();</div><div class="line">		</div><div class="line">	//	printf("]");</div><div class="line">		</div><div class="line">		if(cmp_unsigned(x,y)&lt;=0) &#123; // |x| &gt; =|y|</div><div class="line">			</div><div class="line">			z=sub_unsigned(x,y,precision);</div><div class="line">			z.sign=x.sign;</div><div class="line">			</div><div class="line">		&#125; else &#123;</div><div class="line">			</div><div class="line">			z=sub_unsigned(y,x,precision); // |x| &lt; |y|</div><div class="line">			z.sign=x.sign^1;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void sub_to(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z; z=sub(x,y,precision);</div><div class="line">	</div><div class="line">	x.destroy(); x=z; return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 rcp(__float256 &amp;x,int precision) &#123;</div><div class="line">	</div><div class="line">	//  newton iteration :  r1 = r0 - (r0 * x - 1) * r0 </div><div class="line"> </div><div class="line">	assert(x.L);</div><div class="line"> </div><div class="line">	if(!precision) &#123;</div><div class="line"> </div><div class="line">		precision = 3;</div><div class="line">		</div><div class="line">		int Aexp=x.exp,AL=x.L,*pA=x.array;</div><div class="line">		</div><div class="line">		if(AL&gt;precision) &#123;</div><div class="line">			int chop=AL-precision;</div><div class="line">			AL=precision;</div><div class="line">			Aexp+=chop;</div><div class="line">			pA+=chop;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		double v=pA[0];</div><div class="line">		</div><div class="line">		if(AL&gt;=2) v+=pA[1]*1000000000.;</div><div class="line">		if(AL&gt;=3) v+=pA[2]*1000000000000000000.;</div><div class="line">		</div><div class="line">		v=1./v,Aexp=-Aexp;</div><div class="line">		</div><div class="line">		while(v&lt;1000000000.) &#123;</div><div class="line">			v*=1000000000.;</div><div class="line">			--Aexp;</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		long long v64=(long long)v;</div><div class="line">		</div><div class="line">		__float256 z;</div><div class="line">		</div><div class="line">		z.sign=x.sign;</div><div class="line">		z.apply_memory(2);</div><div class="line">		z.array[0]=v64%1000000000;</div><div class="line">		z.array[1]=v64/1000000000;</div><div class="line">		z.L=2;</div><div class="line">		z.exp=Aexp;</div><div class="line">	</div><div class="line">	//	z.print();</div><div class="line"> </div><div class="line">		return z;</div><div class="line"> </div><div class="line">	&#125;</div><div class="line"> 	</div><div class="line">    int s = (precision &gt;&gt; 1) + 1;</div><div class="line">    if (precision == 1) s = 0;</div><div class="line">    if (precision == 2) s = 1;</div><div class="line"> </div><div class="line">    __float256 z;</div><div class="line">	</div><div class="line">	z = rcp(x,s);</div><div class="line">	</div><div class="line">//	z.print();</div><div class="line">    </div><div class="line">	__float256 one ; one.set32(1);</div><div class="line"> </div><div class="line">    __float256 e;</div><div class="line">	</div><div class="line">	e = mul(z,x,precision);</div><div class="line"> </div><div class="line"> //	e.print();</div><div class="line"> </div><div class="line">    sub_to(e,one,precision);</div><div class="line"> </div><div class="line"> //	e.print();</div><div class="line"> 	</div><div class="line"> //	while(true);</div><div class="line">    </div><div class="line">    mul_to(e,z,precision);</div><div class="line">    </div><div class="line"> //   e.print();</div><div class="line">    </div><div class="line"> //   printf("?");</div><div class="line">    </div><div class="line"> //   z.print();</div><div class="line">    </div><div class="line">    sub_to(z,e,precision);</div><div class="line">    </div><div class="line">  //  z.print();</div><div class="line">    </div><div class="line"> //   while(true);</div><div class="line"> </div><div class="line">    e.destroy();</div><div class="line">    one.destroy();</div><div class="line"> </div><div class="line">    return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 div(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z; z=rcp(y,precision);</div><div class="line"> </div><div class="line">	mul_to(z,x,precision);</div><div class="line">	</div><div class="line">	return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void div_to(__float256 &amp;x,__float256 &amp;y,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z; z = div(x,y,precision);</div><div class="line">	</div><div class="line">	x.destroy(); x=z; return ;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void div_to2(__float256 &amp;q,__float256 &amp;p,int precision) &#123;</div><div class="line">	</div><div class="line">	__float256 z; z = div(q,p,precision);</div><div class="line">	</div><div class="line">	p.destroy(); p=z; return ;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">__float256 invsqrt(int x,int precision) &#123;</div><div class="line">	</div><div class="line">    //            (  r0^2 * x - 1  )</div><div class="line">    //  r1 = r0 - (----------------) * r0</div><div class="line">    //            (       2        )</div><div class="line">	</div><div class="line">	assert(x&gt;0);</div><div class="line">	</div><div class="line">	if(!precision) &#123;</div><div class="line"> </div><div class="line">		double v=1.0/sqrt((double)(x));</div><div class="line"> </div><div class="line"> 		int exponent=0;</div><div class="line"> 		</div><div class="line"> 		while(v&lt;1000000000.) &#123;</div><div class="line"> 			v*=1000000000.;</div><div class="line"> 			--exponent;</div><div class="line"> 				</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		long long v64=(long long)(v);</div><div class="line">		</div><div class="line">		__float256 z;</div><div class="line">		</div><div class="line">		z.sign=true;</div><div class="line">		z.apply_memory(2);</div><div class="line">		z.array[0]=v64%1000000000ll;</div><div class="line">		z.array[1]=v64/1000000000ll;</div><div class="line">		z.L=2;</div><div class="line">		z.exp=exponent;</div><div class="line"> </div><div class="line">		return z;</div><div class="line"> </div><div class="line">	&#125;</div><div class="line">	</div><div class="line">    int s = (precision &gt;&gt; 1) + 1;</div><div class="line">    if (precision == 1) s = 0;</div><div class="line">    if (precision == 2) s = 1;</div><div class="line">    </div><div class="line">    __float256 z;</div><div class="line">	</div><div class="line">	z = invsqrt(x,s);</div><div class="line">    </div><div class="line">	__float256 sp;</div><div class="line">	</div><div class="line">	sp = mul(z,z,precision);</div><div class="line">	</div><div class="line">	__float256 fig; fig.set32(1);</div><div class="line">	</div><div class="line">	</div><div class="line">	mul_to(sp,x);</div><div class="line"> </div><div class="line">	sub_to(sp,fig,precision);</div><div class="line">	</div><div class="line">	fig.destroy();</div><div class="line">	</div><div class="line">	mul_to(sp,500000000);</div><div class="line">	</div><div class="line">	--sp.exp;</div><div class="line">	</div><div class="line">	mul_to(sp,z,precision); </div><div class="line">	sub_to(z,sp,precision);</div><div class="line">	</div><div class="line">	sp.destroy();  return z;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void prepareUtility() &#123;</div><div class="line">	</div><div class="line">	bin[0]=1;</div><div class="line">	</div><div class="line">	for(int i=1;i&lt;=int_log;i++) bin[i]=1&lt;&lt;i;</div><div class="line">	</div><div class="line">	return;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">/*</div><div class="line"> </div><div class="line">void __float256_Test1() &#123;</div><div class="line">	</div><div class="line">	__float256 a,c;</div><div class="line">	</div><div class="line">	// a.setDB(-3456789123456789.2);</div><div class="line">	</div><div class="line">	// a.print(0);</div><div class="line">	</div><div class="line">	a.setDB(2);</div><div class="line">	</div><div class="line">	double st=global_time();</div><div class="line">	</div><div class="line">	while(a.L*9&lt;17000000) &#123;</div><div class="line">		</div><div class="line">		mul_to(a,a,0);</div><div class="line">		</div><div class="line">		if(a.L&lt;500) a.print(0),puts("");</div><div class="line">		</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	printf("time used = %.2lf \n",global_time()-st);</div><div class="line">	</div><div class="line">	return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void __float256_Test2() &#123;</div><div class="line">	</div><div class="line">	__float256 a,b;</div><div class="line">	</div><div class="line">	a.setDB(15.3),b.setDB(-15.2);</div><div class="line">	</div><div class="line">	a.print(0),b.print(0);</div><div class="line">	</div><div class="line">	printf("%d \n",cmp_unsigned(a,b));</div><div class="line">	</div><div class="line">	return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void __float256_Test3() &#123;</div><div class="line">	</div><div class="line">	__float256 a;</div><div class="line">	</div><div class="line">	a.setDB(-0.3);</div><div class="line">	</div><div class="line">	a.print(0);</div><div class="line">	</div><div class="line">	mul_to(a,-9);</div><div class="line">	</div><div class="line">	a.print(0);</div><div class="line">	</div><div class="line">	return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void __float256_Test4() &#123;</div><div class="line">	</div><div class="line">	__float256 a,b,c;</div><div class="line">	</div><div class="line">	a.setDB(-200000.5),b.setDB(1000000.5);</div><div class="line">	</div><div class="line">	a.print(0),b.print(0);</div><div class="line">	</div><div class="line">	c=add(a,b);</div><div class="line">	</div><div class="line">	c.print(0);</div><div class="line">	</div><div class="line">	return;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void __float256_Test5() &#123;</div><div class="line"> </div><div class="line">	__float256 a,b;</div><div class="line"> </div><div class="line">	a.setLL((long long)(1e17));</div><div class="line"> </div><div class="line">	b=rcp(a,10,iterN);</div><div class="line"> </div><div class="line">	b.print(0);</div><div class="line"> </div><div class="line">	return;</div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line">void __float256_Test6() &#123;</div><div class="line"> </div><div class="line">	__float256 a;</div><div class="line"> </div><div class="line">	a=invsqrt(10005,100,iterN);</div><div class="line"> </div><div class="line">	a.print(0);</div><div class="line"> </div><div class="line">	return;</div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line">*/ </div><div class="line"> </div><div class="line">void __float256_Test7() &#123;</div><div class="line">	</div><div class="line">	__float256 a;</div><div class="line">	</div><div class="line">	a=invsqrt(10005,10);</div><div class="line">	</div><div class="line">	a.print();</div><div class="line">	</div><div class="line">	return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void pi_bsr(__float256 &amp;P,__float256 &amp;Q,__float256 &amp;R,int a,int b,int precision,int iter) &#123;</div><div class="line">	</div><div class="line">	assert(iter&lt;20);</div><div class="line">	assert(iter&gt;=0);</div><div class="line">	assert(a&lt;b);</div><div class="line">	assert(a&gt;=0);</div><div class="line">	assert(b&gt;=0);</div><div class="line">	</div><div class="line">	if(b-a==1) &#123;</div><div class="line">		</div><div class="line">		 //  P = (13591409 + 545140134 b)(2b-1)(6b-5)(6b-1) (-1)^b</div><div class="line">		 </div><div class="line">        P.set32(b);</div><div class="line">        </div><div class="line">		mul_to(P,545140134ul);</div><div class="line">		</div><div class="line">		__float256 fig; fig.set32(13591409ul);</div><div class="line">		</div><div class="line">		add_to(P,fig,precision);</div><div class="line">		</div><div class="line">		fig.destroy();</div><div class="line">		</div><div class="line">		mul_to(P,2*b-1);</div><div class="line">		mul_to(P,6*b-5);</div><div class="line">		mul_to(P,6*b-1);</div><div class="line">	</div><div class="line">        if ( b &amp; 1 ) P.negate();</div><div class="line"> </div><div class="line">        //  Q = 10939058860032000 * b^3</div><div class="line">        </div><div class="line">        Q.set32(b);</div><div class="line">        </div><div class="line">        __float256 Q2=mul(Q,Q,precision);</div><div class="line">        </div><div class="line">        mul_to(Q,Q2,precision); Q2.destroy();</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        mul_to(Q,26726400ul);        </div><div class="line">        mul_to(Q,409297880ul);</div><div class="line">        </div><div class="line"> </div><div class="line"> </div><div class="line">        //  R = (2b-1)(6b-5)(6b-1)</div><div class="line">        </div><div class="line">		R.set32(2*b-1);</div><div class="line">		mul_to(R,6*b-5);</div><div class="line">		mul_to(R,6*b-1);</div><div class="line"> </div><div class="line">		return;		</div><div class="line">	&#125;</div><div class="line">    </div><div class="line">    int mid=(a+b)&gt;&gt;1;</div><div class="line">    </div><div class="line">    __float256 P0, Q0, R0, P1, Q1, R1;</div><div class="line">    </div><div class="line">    pi_bsr(P0, Q0, R0, a, mid, precision,iter+1);</div><div class="line">    pi_bsr(P1, Q1, R1, mid, b, precision,iter+1);</div><div class="line">    </div><div class="line">    __float256 I1=mul(P0,Q1,precision);</div><div class="line">    __float256 I2=mul(P1,R0,precision);</div><div class="line">    </div><div class="line">    P0.destroy();</div><div class="line">    P1.destroy();</div><div class="line">    </div><div class="line">    P = add(I1,I2,precision);</div><div class="line">    </div><div class="line">    I1.destroy();</div><div class="line">    I2.destroy();</div><div class="line">    </div><div class="line">    Q = mul(Q0,Q1,precision);</div><div class="line">    </div><div class="line">    Q0.destroy();</div><div class="line">    Q1.destroy();</div><div class="line">    </div><div class="line">    R = mul(R0,R1,precision);</div><div class="line">    </div><div class="line">    R0.destroy();</div><div class="line">    R1.destroy();</div><div class="line">    </div><div class="line">    return;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"> </div><div class="line">int main() &#123;</div><div class="line">	</div><div class="line">	prepareUtility();</div><div class="line"> </div><div class="line">	// FFT::Test();</div><div class="line"> </div><div class="line">	// __float256_Test1();</div><div class="line">	// __float256_Test2();</div><div class="line">	// __float256_Test3();</div><div class="line">	// __float256_Test4();</div><div class="line">	// __float256_Test5();</div><div class="line">	// __float256_Test6();</div><div class="line">	// __float256_Test7();</div><div class="line"> </div><div class="line">	</div><div class="line">	freopen("RealPi.in","r",stdin);</div><div class="line">	</div><div class="line">	int digits;</div><div class="line">	</div><div class="line">	scanf("%d",&amp;digits);</div><div class="line"> </div><div class="line">	digits++;</div><div class="line">	</div><div class="line">    int precision = (digits + 8) / 9;</div><div class="line">	double terms = (precision * 0.6346230241342037371474889163921741077188431452678) + 1;</div><div class="line"> </div><div class="line">	__float256 P,Q,R;</div><div class="line"> </div><div class="line">	pi_bsr(P,Q,R,0,(int)terms,precision,0);</div><div class="line">	</div><div class="line">	R.destroy();</div><div class="line">	</div><div class="line">	R=mul(Q,13591409);</div><div class="line">	</div><div class="line">	add_to(P,R,precision);</div><div class="line"> </div><div class="line">	mul_to(Q,4270934400ul);</div><div class="line"> </div><div class="line">	div_to2(Q,P,precision);</div><div class="line">	</div><div class="line">	Q.destroy();</div><div class="line">	</div><div class="line">	Q=invsqrt(10005,precision);</div><div class="line">	</div><div class="line">	mul_to(P,Q,precision);</div><div class="line">	</div><div class="line">	write_in_file("RealPi.out","Pi="+P.to_string(digits));</div><div class="line"> </div><div class="line">	return 0;</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>第一版 十分naive….大概也就1w位….</li>
<li>代码实在是太丑了就不贴了</li>
<li>要是想看有多丑就看<a href="http://cojs.tk/cogs/submit/code.php?id=255103" target="_blank" rel="external">COGS</a></li>
</ul>
<h2 id="算后感想"><a href="#算后感想" class="headerlink" title="算后感想"></a>算后感想</h2><ul>
<li>写完了之后实在是太爽了，想把机房掀了</li>
<li>妈妈再也不用愁我的代码能力了</li>
<li>这才是真·OI</li>
<li>NOI前的最后一个心愿完成了</li>
<li>3个月前的坑填上了</li>
<li>就算NOI滚粗也无悔了….</li>
<li>希望大学可以搞一些这样有意思的东西,而不是无止境的刷题…..</li>
</ul>
<h2 id=""><a href="#" class="headerlink" title="?"></a>?</h2><ul>
<li>希望大家有兴趣可以写一写</li>
<li>我好像传到bzoj了,不知道有没有通过</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://www.guokr.com/blog/444081/" target="_blank" rel="external">一起来算圆周率</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pi" target="_blank" rel="external">Wikipedia Pi</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/有趣的东西/" rel="tag"># 有趣的东西</a>
          
            <a href="/tags/圆周率/" rel="tag"># 圆周率</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/12/summary/" rel="next" title="NOI 前最后的总结">
                <i class="fa fa-chevron-left"></i> NOI 前最后的总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/07/30/noi2016/" rel="prev" title="NOI 2016 游记">
                NOI 2016 游记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/07/20/有关圆周率的计算/"
     data-title="有关圆周率的计算"
     data-content=""
     data-url="http://stdafx.ga/2016/07/20/有关圆周率的计算/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/07/20/有关圆周率的计算/"
           data-title="有关圆周率的计算" data-url="http://stdafx.ga/2016/07/20/有关圆周率的计算/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="stdafx" />
          <p class="site-author-name" itemprop="name">stdafx</p>
          <p class="site-description motion-element" itemprop="description">Why Be A King When You Can Be A God ?</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/lawyer/p/" title="phx" target="_blank">phx</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/hzoi_ztx" title="ztx" target="_blank">ztx</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://lzy-foenix.gitcafe.io/" title="lzy" target="_blank">lzy</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/joyouth/" title="ad" target="_blank">ad</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/qq_34025203?viewmode=contents" title="syx" target="_blank">syx</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/assassain/" title="lyc" target="_blank">lyc</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/Candyouth/" title="smz" target="_blank">smz</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/lglin000" title="lgl" target="_blank">lgl</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/zzzzzfy" title="zfy" target="_blank">zfy</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么算这个"><span class="nav-number">1.</span> <span class="nav-text">为什么算这个</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预备技能"><span class="nav-number">2.</span> <span class="nav-text">预备技能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#我用的两个公式"><span class="nav-number">3.</span> <span class="nav-text">我用的两个公式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#怎么写"><span class="nav-number">4.</span> <span class="nav-text">怎么写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码"><span class="nav-number">5.</span> <span class="nav-text">代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第二版"><span class="nav-number">5.1.</span> <span class="nav-text">第二版</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#算后感想"><span class="nav-number">6.</span> <span class="nav-text">算后感想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#"><span class="nav-number">7.</span> <span class="nav-text">?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">8.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">stdafx</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"stdafx"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
